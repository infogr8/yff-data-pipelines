schema: '2.0'
stages:
  process-latest-by-pcon:
    cmd: papermill --no-progress-bar --no-report-mode latest-by-pcon.ipynb ../../output/labour-market-latest-by-pcon.ipynb
    deps:
    - path: ../../data/raw/lfs_by_pcon.csv
      hash: md5
      md5: fdbad8722282bb8cdf2f14f58b755bd7
      size: 321876972
    - path: latest-by-pcon.ipynb
      hash: md5
      md5: 4bb7f2a3697dbdec0dc7f3484fdbdf8c
      size: 6304
    outs:
    - path: ../../data/processed/labour-market/labour_market_by_pcon.csv
      hash: md5
      md5: 6e51bdc22a289ed0c08a646de9b9e577
      size: 34732926
    - path: ../../data/processed/labour-market/labour_market_by_pcon.parquet
      hash: md5
      md5: 0491a20b89879395b1dd73c4062ed138
      size: 348031
  download-latest-monthly:
    cmd: python get-lms.py
    deps:
    - path: get-lms.py
      hash: md5
      md5: d867549a5afa597554480324dbe7a1a6
      size: 392
    outs:
    - path: ../../data/raw/lms.csv
      hash: md5
      md5: 9a6b4841ae2e20d462a63bc9b5db174a
      size: 10960377
  process-latest-a06:
    cmd: papermill --no-progress-bar --no-report-mode process-a06.ipynb ../../output/labour-market-a06.ipynb
    deps:
    - path: ../../data/raw/a06-latest.xls
      hash: md5
      md5: b55c248c9f370fcc9b99c6e0f0182abe
      size: 1420800
    - path: ../control.csv
      hash: md5
      md5: 281cbe09548cd37943a80f132c03d510
      size: 400
    - path: process-a06.ipynb
      hash: md5
      md5: 3b1ec02b4949eb99f6ee5e6f9d5798bf
      size: 3429
    outs:
    - path: ../../data/metadata/labour-market/a06-codes.csv
      hash: md5
      md5: 3f799e9ed3c83566e723403c35e4e6ef
      size: 13078
    - path: ../../data/processed/labour-market/a06.csv
      hash: md5
      md5: f822feee8322b02c493a5331f255a7d7
      size: 7862386
  process-latest-unem01:
    cmd: papermill --no-progress-bar --no-report-mode process-unem01.ipynb ../../output/labour-market-unem01.ipynb
    deps:
    - path: ../../data/raw/unem01-latest.xls
      hash: md5
      md5: e00ba8307ad88754c0aef5a65e4d9576
      size: 968192
    - path: ../control.csv
      hash: md5
      md5: 281cbe09548cd37943a80f132c03d510
      size: 400
    - path: process-unem01.ipynb
      hash: md5
      md5: ee1ea65ea09ad0769e6576218327ab50
      size: 2954
    outs:
    - path: ../../data/metadata/labour-market/unem01-codes.csv
      hash: md5
      md5: 87c4fb8da060e2318a9eb70ccc7c41d3
      size: 5512
    - path: ../../data/processed/labour-market/unem01.csv
      hash: md5
      md5: dee70464341c5ce05044253d5cbb236b
      size: 3975529
  download-from-nomis:
    cmd: python download-from-nomis-api.py
    deps:
    - path: download-from-nomis-api.py
      hash: md5
      md5: 7c9d2e51ee35d4274e16c9f153fa5ca3
      size: 1733
    outs:
    - path: ../../data/raw/lfs_by_pcon.csv
      hash: md5
      md5: fdbad8722282bb8cdf2f14f58b755bd7
      size: 321876972
  process-lms:
    cmd: papermill --no-progress-bar --no-report-mode process-lms.ipynb ../../output/process-lms.ipynb
    deps:
    - path: ../../data/raw/lms.csv
      hash: md5
      md5: 9a6b4841ae2e20d462a63bc9b5db174a
      size: 10960377
    - path: process-lms.ipynb
      hash: md5
      md5: 0284da901a7bf0a081822a9a1b255940
      size: 4410
    outs:
    - path: ../../data/metadata/codes/lms-codes.csv
      hash: md5
      md5: 1ab28b2730305c82dcdb124ce296a66b
      size: 181882
    - path: ../../data/processed/labour-market/lms.csv
      hash: md5
      md5: 72d52598a0ba79effd075f9f66180a4d
      size: 17934704
  download-x10:
    cmd: PYTHONPATH=../.. python download-x10.py
    deps:
    - path: download-x10.py
      hash: md5
      md5: 87829813a367f8a60d77514e33a3fdee
      size: 718
    outs:
    - path: ../../data/raw/x10.xlsx
      hash: md5
      md5: 9110a578360bf9ef01b1fa2fdc5e9e7e
      size: 1652825
  process-x10:
    cmd: papermill process-x10.ipynb ../../output/process-x10.ipynb
    deps:
    - path: ../../data/raw/x10.xlsx
      hash: md5
      md5: 9110a578360bf9ef01b1fa2fdc5e9e7e
      size: 1652825
    - path: process-x10.ipynb
      hash: md5
      md5: 71bda47a6b698bd716037ba0c36d5c8e
      size: 3725
    outs:
    - path: ../../data/metadata/codes/x10-codes.csv
      hash: md5
      md5: fa5c91058c59f806e879162b20c23444
      size: 4074
    - path: ../../data/processed/x10.csv
      hash: md5
      md5: fc8893410355546fe3f20d565a586780
      size: 1253611
